<html>

<head>
    <!-- SCRIPTS -->
    <!-- Reading experiment parameters -->
    <script src="../../graphs_functions.js"></script>
    <script src="../../experiment_parameters.js"></script>
    <!-- Reading graph pool generation script -->
    <script src="graph_pool_withoutclique_generation.js"></script>
    <!-- Saving files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"
        integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"> </script>
    <!-- Zipping files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
</head>

<body>
    <h2>Create a number of single graphs without the clique, of the given clique size, and saving them to local computer
        using <i>FileSaver</i> JavaScript Library.</h2>
    <button type="button" onclick="CreateJSONGraphPoolZipFile_WITHOUTCLIQUE(graphPoolObject.graphsToSave);">Create JSON
        File of graphs WITHOUT CLIQUE</button>
    <script>

        // CREATING graphPoolObject OBJECT:
        const graphPoolObject = {
            // pool size (experiment and graphs parameters are already stored)
            numberOfGraphsPerCliqueSize: 100,
        }

        let cliqueSize = prompt("Insert the clique size for which you want to generate the graphs WITHOUT the clique (N=300):")

        // Generating the array of graphs and adding them to the object
        graphPoolObject.graphsToSave = generateGraphsWithOutClique(cliqueSize)

        console.log(graphPoolObject)

        /* SAVING GRAPHS AS SINGLE JSON FILES IF BUTTON IS PRESSED */
        // transforming each graph into .json format to export it
        function CreateJSONGraphPoolZipFile_WITHOUTCLIQUE(arrayOfGraphsToSave) {
            const zip = new JSZip();

            for (let graphIndex = 0; graphIndex < arrayOfGraphsToSave.length; graphIndex++) {
                const json = JSON.stringify(arrayOfGraphsToSave[graphIndex]);
                zip.file(`${arrayOfGraphsToSave[graphIndex][300].graph_name}.json`, json);
            }

            zip.generateAsync({ type: "blob" }).then(function (content) {
                saveAs(content, `graphs_without_clique_${cliqueSize}`);
            });
        }


    </script>
</body>

</html>