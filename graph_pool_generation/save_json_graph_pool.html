<html>

<head>
    <!-- SCRIPTS -->
    <!-- Reading experiment parameters and graphs generation scripts -->
    <script src="../graphs_generation.js"></script>
    <script src="../experiment_parameters.js"></script>
    <!-- Reading graph pool generation script -->
    <script src="graph_pool_generation.js"></script>
    <!-- Saving files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"
        integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"> </script>
</head>

<body>
    <h2>Create JSON file of graph pool and save it to local computer using <i>FileSaver</i> JavaScript Library.</h2>
    <button type="button" onclick="CreateJSONGraphPoolFile();">Create JSON File</button>
    <script>

        // CREATING graphPoolObject OBJECT:
        const graphPoolObject = {
            // pool size (experiment and graphs parameters are already stored)
            numberOfGraphsPerCliqueSizeInEachBlock: 100,
        }

        // generating average degree arrays (will be plotted) and adding them as properties of "graphPoolObject" object
        // UNCORRECTED graphs:
        graphPoolObject.uncorrectedGraphsAverageDegreeArray = []
        for (let index = 0; index < graphPoolObject.arrayOfCliqueSizes.length; index++) {
            //pushing the average degree value into the array  (NB: the average degree of each graph is stored as the last element of the object)
            graphPoolObject.uncorrectedGraphsAverageDegreeArray.push(graphPoolObject.graphsToCompare[index][0][graphPoolObject.numberOfNodes])
        }
        //  CORRECTED graphs:
        graphPoolObject.correctedGraphsAverageDegreeArray = []
        for (let index = 0; index < graphPoolObject.arrayOfCliqueSizes.length; index++) {
            //pushing the average degree value into the array  (NB: the average degree of each graph is stored as the last element of the object)
            graphPoolObject.correctedGraphsAverageDegreeArray.push(graphPoolObject.graphsToCompare[index][1][graphPoolObject.numberOfNodes])
        }

        // visualizing the average degree of the graphs
        console.log(graphPoolObject.uncorrectedGraphsAverageDegreeArray)  // uncorrected average degree -> remains constant as cliqueSize increases
        console.log(graphPoolObject.correctedGraphsAverageDegreeArray)  // corrected average degree -> increases as cliqueSize increases


        /* SAVING JSON FILE IF BUTTON IS PRESSED */
        // transforming the two arrays into .json format to export them
        function CreateJSONGraphPoolFile() {
            // convert the object to a JSON string
            const json = JSON.stringify(graphPoolObject);
            // create a new Blob object with the JSON string
            const blob = new Blob([json], { type: "application/json;charset=utf-8" });
            // save the Blob object to a file using FileSaver.js
            saveAs(blob, "graphPoolObjectObject_cliqueLessGraphs.json");
        }

    </script>
</body>

</html>